#!/bin/bash

case "$1" in
        start)
            docker run -d -it -p 80:80 --net=host -h 127.0.0.1 \
            -v /home/m92295/web/itop-docker-run/conf:/app/web/conf \
            -v /home/m92295/web/itop-docker-run/data:/app/web/data \
            -v /home/m92295/web/itop-docker-run/env-production:/app/web/env-production \
            -v /home/m92295/web/itop-docker-run/log:/app/web/log \
            -v /home/m92295/PycharmProjects/itop-docker/itop-extensions:/app/web/extensions \
            robban/dev
            ;;
         
        stop)
            docker ps | grep robban/dev | awk '{print $1}'| xargs docker stop
            ;;
         
        build)
            cd ~/PycharmProjects/itop-docker
            docker build -t robban/dev .
            ;;
        restart)
            docker ps | grep robban/dev | awk '{print $1}'| xargs docker restart
            ;;
        shell)
            DOCKERID=`docker ps | grep robban/dev | awk '{print $1}'`
            docker exec -it $DOCKERID /bin/bash
            ;;
        config)
            DOCKERID=`docker ps | grep robban/dev | awk '{print $1}'`
            docker exec -it $DOCKERID /scripts/make-itop-config-writable.sh
            ;;
        toolkit)
            DOCKERID=`docker ps | grep robban/dev | awk '{print $1}'`
            docker exec -it $DOCKERID /scripts/install-toolkit.sh
            ;;
        status)
            docker ps
            ;;
         
        *)
            echo $"Usage: $0 {start|stop|restart|status}"
            exit 1
 
esac


